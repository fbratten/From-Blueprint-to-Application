<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Server Setup Lab - From Blueprint to Application</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        code, .font-mono, pre { font-family: 'JetBrains Mono', monospace; }
        .tab-active { border-bottom: 2px solid #6366f1; color: #6366f1; }
        pre { tab-size: 2; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <nav class="text-sm text-gray-500">
                <a href="../../" class="hover:text-indigo-600">From Blueprint to Application</a>
                <span class="mx-2">/</span>
                <a href="../" class="hover:text-indigo-600">Demos</a>
                <span class="mx-2">/</span>
                <span class="text-gray-900">MCP Server Setup</span>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <div class="text-center mb-8">
            <div class="inline-flex items-center gap-2 bg-indigo-100 text-indigo-700 px-4 py-2 rounded-full text-sm font-medium mb-4">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>
                </svg>
                Infrastructure Lab - Chapter 11
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Build Your First MCP Server</h1>
            <p class="text-gray-600 max-w-2xl mx-auto">The Model Context Protocol (MCP) is becoming the "HTTP of AI" - a standard way for AI systems to access tools and data. Learn how to build your own MCP server.</p>
        </div>

        <!-- What is MCP -->
        <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white mb-8">
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div>
                    <h2 class="text-2xl font-bold mb-4">What is MCP?</h2>
                    <p class="text-indigo-100 mb-4">The Model Context Protocol standardizes how AI assistants connect to external tools, data sources, and services. Think of it as giving your AI superpowers.</p>
                    <ul class="space-y-2 text-indigo-100">
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-indigo-300" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                            <span>Connect AI to your databases & APIs</span>
                        </li>
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-indigo-300" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                            <span>Create reusable tools across projects</span>
                        </li>
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-indigo-300" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                            <span>Build enterprise-grade AI infrastructure</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-white/10 rounded-xl p-6">
                    <p class="text-sm text-indigo-200 mb-2">MCP Architecture (Model Agnostic)</p>
                    <pre class="text-sm text-white">
┌─────────────┐     ┌─────────────┐
│   AI Host   │────▶│ MCP Server  │
│  (Any LLM)  │◀────│  (Your App) │
└─────────────┘     └─────────────┘
       │                   │
       │    JSON-RPC       │
       │    Protocol       │
       ▼                   ▼
  ┌─────────┐       ┌───────────┐
  │ Tools   │       │ Resources │
  │ Prompts │       │ Data      │
  └─────────┘       └───────────┘</pre>
                </div>
            </div>
        </div>

        <!-- Language Selection -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8">
            <div class="border-b border-gray-200">
                <div class="flex">
                    <button onclick="showTab('typescript')" id="tab-typescript" class="tab-active px-6 py-4 font-medium text-gray-700 hover:text-indigo-600 transition flex items-center gap-2">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"/>
                        </svg>
                        TypeScript
                    </button>
                    <button onclick="showTab('python')" id="tab-python" class="px-6 py-4 font-medium text-gray-500 hover:text-indigo-600 transition flex items-center gap-2">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/>
                        </svg>
                        Python
                    </button>
                </div>
            </div>

            <!-- Technology Comparison -->
            <div class="p-6 bg-amber-50 border-b border-amber-100">
                <h3 class="font-semibold text-amber-900 mb-2 flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    When to Choose Each Technology
                </h3>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div class="bg-white rounded-lg p-4 border border-amber-200">
                        <p class="font-semibold text-blue-700 mb-2">Choose TypeScript when:</p>
                        <ul class="space-y-1 text-gray-700">
                            <li>- Your team already uses Node.js/JavaScript</li>
                            <li>- Building web-integrated MCP servers</li>
                            <li>- Need strong typing for large codebases</li>
                            <li>- Want excellent IDE support & tooling</li>
                            <li>- Deploying to serverless (Vercel, AWS Lambda)</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-lg p-4 border border-amber-200">
                        <p class="font-semibold text-green-700 mb-2">Choose Python when:</p>
                        <ul class="space-y-1 text-gray-700">
                            <li>- Working with data science / ML pipelines</li>
                            <li>- Integrating with existing Python services</li>
                            <li>- Need rich ecosystem (pandas, numpy, etc.)</li>
                            <li>- Rapid prototyping is priority</li>
                            <li>- Team is more comfortable with Python</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TypeScript Content -->
            <div id="content-typescript" class="p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">TypeScript MCP Server</h3>

                <!-- Step 1 -->
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                        <h4 class="font-medium text-gray-900">Initialize Your Project</h4>
                    </div>
                    <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                        <pre class="text-sm text-gray-300"><code><span class="text-gray-500"># Create project directory</span>
mkdir my-mcp-server && cd my-mcp-server

<span class="text-gray-500"># Initialize with npm</span>
npm init -y

<span class="text-gray-500"># Install MCP SDK and TypeScript</span>
npm install @modelcontextprotocol/sdk zod
npm install -D typescript @types/node tsx

<span class="text-gray-500"># Initialize TypeScript</span>
npx tsc --init</code></pre>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                        <h4 class="font-medium text-gray-900">Create Your MCP Server</h4>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">Create <code class="bg-gray-100 px-1 rounded">src/index.ts</code>:</p>
                    <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto relative">
                        <button onclick="copyCode('ts-code')" class="absolute top-2 right-2 text-gray-400 hover:text-white text-xs bg-gray-700 px-2 py-1 rounded">Copy</button>
                        <pre id="ts-code" class="text-sm text-gray-300"><code><span class="text-purple-400">import</span> { McpServer } <span class="text-purple-400">from</span> <span class="text-green-400">"@modelcontextprotocol/sdk/server/mcp.js"</span>;
<span class="text-purple-400">import</span> { StdioServerTransport } <span class="text-purple-400">from</span> <span class="text-green-400">"@modelcontextprotocol/sdk/server/stdio.js"</span>;
<span class="text-purple-400">import</span> { z } <span class="text-purple-400">from</span> <span class="text-green-400">"zod"</span>;

<span class="text-gray-500">// Create the MCP server instance</span>
<span class="text-purple-400">const</span> server = <span class="text-purple-400">new</span> McpServer({
  name: <span class="text-green-400">"my-first-mcp-server"</span>,
  version: <span class="text-green-400">"1.0.0"</span>,
});

<span class="text-gray-500">// Define a simple tool: get current time</span>
server.tool(
  <span class="text-green-400">"get_current_time"</span>,
  <span class="text-green-400">"Returns the current date and time"</span>,
  {
    timezone: z.string().optional().describe(<span class="text-green-400">"Timezone (e.g., 'UTC', 'America/New_York')"</span>),
  },
  <span class="text-purple-400">async</span> ({ timezone }) => {
    <span class="text-purple-400">const</span> now = <span class="text-purple-400">new</span> Date();
    <span class="text-purple-400">const</span> options: Intl.DateTimeFormatOptions = {
      timeZone: timezone || <span class="text-green-400">"UTC"</span>,
      dateStyle: <span class="text-green-400">"full"</span>,
      timeStyle: <span class="text-green-400">"long"</span>,
    };
    <span class="text-purple-400">return</span> {
      content: [{
        type: <span class="text-green-400">"text"</span>,
        text: now.toLocaleString(<span class="text-green-400">"en-US"</span>, options)
      }],
    };
  }
);

<span class="text-gray-500">// Define a tool: simple calculator</span>
server.tool(
  <span class="text-green-400">"calculate"</span>,
  <span class="text-green-400">"Performs basic arithmetic operations"</span>,
  {
    operation: z.enum([<span class="text-green-400">"add"</span>, <span class="text-green-400">"subtract"</span>, <span class="text-green-400">"multiply"</span>, <span class="text-green-400">"divide"</span>]),
    a: z.number().describe(<span class="text-green-400">"First number"</span>),
    b: z.number().describe(<span class="text-green-400">"Second number"</span>),
  },
  <span class="text-purple-400">async</span> ({ operation, a, b }) => {
    <span class="text-purple-400">let</span> result: number;
    <span class="text-purple-400">switch</span> (operation) {
      <span class="text-purple-400">case</span> <span class="text-green-400">"add"</span>: result = a + b; <span class="text-purple-400">break</span>;
      <span class="text-purple-400">case</span> <span class="text-green-400">"subtract"</span>: result = a - b; <span class="text-purple-400">break</span>;
      <span class="text-purple-400">case</span> <span class="text-green-400">"multiply"</span>: result = a * b; <span class="text-purple-400">break</span>;
      <span class="text-purple-400">case</span> <span class="text-green-400">"divide"</span>:
        <span class="text-purple-400">if</span> (b === 0) <span class="text-purple-400">throw new</span> Error(<span class="text-green-400">"Division by zero"</span>);
        result = a / b;
        <span class="text-purple-400">break</span>;
    }
    <span class="text-purple-400">return</span> {
      content: [{ type: <span class="text-green-400">"text"</span>, text: <span class="text-green-400">`Result: </span>${result}<span class="text-green-400">`</span> }],
    };
  }
);

<span class="text-gray-500">// Start the server</span>
<span class="text-purple-400">async function</span> main() {
  <span class="text-purple-400">const</span> transport = <span class="text-purple-400">new</span> StdioServerTransport();
  <span class="text-purple-400">await</span> server.connect(transport);
  console.error(<span class="text-green-400">"MCP Server running..."</span>);
}

main().catch(console.error);</code></pre>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
                        <h4 class="font-medium text-gray-900">Configure & Run</h4>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">Add to your <code class="bg-gray-100 px-1 rounded">package.json</code>:</p>
                    <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                        <pre class="text-sm text-gray-300"><code>{
  <span class="text-green-400">"scripts"</span>: {
    <span class="text-green-400">"start"</span>: <span class="text-green-400">"tsx src/index.ts"</span>,
    <span class="text-green-400">"build"</span>: <span class="text-green-400">"tsc"</span>
  }
}</code></pre>
                    </div>
                    <p class="text-sm text-gray-600 mt-3 mb-2">Run your server:</p>
                    <div class="bg-gray-900 rounded-lg p-4">
                        <pre class="text-sm text-gray-300"><code>npm start</code></pre>
                    </div>
                </div>
            </div>

            <!-- Python Content -->
            <div id="content-python" class="p-6 hidden">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Python MCP Server</h3>

                <!-- Step 1 -->
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="w-6 h-6 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                        <h4 class="font-medium text-gray-900">Set Up Your Environment</h4>
                    </div>
                    <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                        <pre class="text-sm text-gray-300"><code><span class="text-gray-500"># Create project directory</span>
mkdir my-mcp-server && cd my-mcp-server

<span class="text-gray-500"># Create virtual environment (recommended)</span>
python -m venv venv
source venv/bin/activate  <span class="text-gray-500"># On Windows: venv\Scripts\activate</span>

<span class="text-gray-500"># Install MCP SDK</span>
pip install mcp</code></pre>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="w-6 h-6 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                        <h4 class="font-medium text-gray-900">Create Your MCP Server</h4>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">Create <code class="bg-gray-100 px-1 rounded">server.py</code>:</p>
                    <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto relative">
                        <button onclick="copyCode('py-code')" class="absolute top-2 right-2 text-gray-400 hover:text-white text-xs bg-gray-700 px-2 py-1 rounded">Copy</button>
                        <pre id="py-code" class="text-sm text-gray-300"><code><span class="text-purple-400">from</span> datetime <span class="text-purple-400">import</span> datetime
<span class="text-purple-400">from</span> zoneinfo <span class="text-purple-400">import</span> ZoneInfo
<span class="text-purple-400">from</span> mcp.server <span class="text-purple-400">import</span> Server
<span class="text-purple-400">from</span> mcp.server.stdio <span class="text-purple-400">import</span> stdio_server
<span class="text-purple-400">from</span> mcp.types <span class="text-purple-400">import</span> Tool, TextContent

<span class="text-gray-500"># Create the MCP server instance</span>
server = Server(<span class="text-green-400">"my-first-mcp-server"</span>)

<span class="text-gray-500"># Define available tools</span>
<span class="text-yellow-400">@server.list_tools()</span>
<span class="text-purple-400">async def</span> <span class="text-blue-400">list_tools</span>() -> list[Tool]:
    <span class="text-purple-400">return</span> [
        Tool(
            name=<span class="text-green-400">"get_current_time"</span>,
            description=<span class="text-green-400">"Returns the current date and time"</span>,
            inputSchema={
                <span class="text-green-400">"type"</span>: <span class="text-green-400">"object"</span>,
                <span class="text-green-400">"properties"</span>: {
                    <span class="text-green-400">"timezone"</span>: {
                        <span class="text-green-400">"type"</span>: <span class="text-green-400">"string"</span>,
                        <span class="text-green-400">"description"</span>: <span class="text-green-400">"Timezone (e.g., 'UTC', 'America/New_York')"</span>
                    }
                }
            }
        ),
        Tool(
            name=<span class="text-green-400">"calculate"</span>,
            description=<span class="text-green-400">"Performs basic arithmetic operations"</span>,
            inputSchema={
                <span class="text-green-400">"type"</span>: <span class="text-green-400">"object"</span>,
                <span class="text-green-400">"properties"</span>: {
                    <span class="text-green-400">"operation"</span>: {
                        <span class="text-green-400">"type"</span>: <span class="text-green-400">"string"</span>,
                        <span class="text-green-400">"enum"</span>: [<span class="text-green-400">"add"</span>, <span class="text-green-400">"subtract"</span>, <span class="text-green-400">"multiply"</span>, <span class="text-green-400">"divide"</span>]
                    },
                    <span class="text-green-400">"a"</span>: {<span class="text-green-400">"type"</span>: <span class="text-green-400">"number"</span>, <span class="text-green-400">"description"</span>: <span class="text-green-400">"First number"</span>},
                    <span class="text-green-400">"b"</span>: {<span class="text-green-400">"type"</span>: <span class="text-green-400">"number"</span>, <span class="text-green-400">"description"</span>: <span class="text-green-400">"Second number"</span>}
                },
                <span class="text-green-400">"required"</span>: [<span class="text-green-400">"operation"</span>, <span class="text-green-400">"a"</span>, <span class="text-green-400">"b"</span>]
            }
        )
    ]

<span class="text-gray-500"># Handle tool calls</span>
<span class="text-yellow-400">@server.call_tool()</span>
<span class="text-purple-400">async def</span> <span class="text-blue-400">call_tool</span>(name: str, arguments: dict) -> list[TextContent]:
    <span class="text-purple-400">if</span> name == <span class="text-green-400">"get_current_time"</span>:
        tz = arguments.get(<span class="text-green-400">"timezone"</span>, <span class="text-green-400">"UTC"</span>)
        <span class="text-purple-400">try</span>:
            now = datetime.now(ZoneInfo(tz))
            <span class="text-purple-400">return</span> [TextContent(
                type=<span class="text-green-400">"text"</span>,
                text=now.strftime(<span class="text-green-400">"%A, %B %d, %Y at %I:%M:%S %p %Z"</span>)
            )]
        <span class="text-purple-400">except</span> Exception <span class="text-purple-400">as</span> e:
            <span class="text-purple-400">return</span> [TextContent(type=<span class="text-green-400">"text"</span>, text=<span class="text-purple-400">f</span><span class="text-green-400">"Error: {e}"</span>)]

    <span class="text-purple-400">elif</span> name == <span class="text-green-400">"calculate"</span>:
        op = arguments[<span class="text-green-400">"operation"</span>]
        a, b = arguments[<span class="text-green-400">"a"</span>], arguments[<span class="text-green-400">"b"</span>]

        <span class="text-purple-400">if</span> op == <span class="text-green-400">"add"</span>: result = a + b
        <span class="text-purple-400">elif</span> op == <span class="text-green-400">"subtract"</span>: result = a - b
        <span class="text-purple-400">elif</span> op == <span class="text-green-400">"multiply"</span>: result = a * b
        <span class="text-purple-400">elif</span> op == <span class="text-green-400">"divide"</span>:
            <span class="text-purple-400">if</span> b == 0:
                <span class="text-purple-400">return</span> [TextContent(type=<span class="text-green-400">"text"</span>, text=<span class="text-green-400">"Error: Division by zero"</span>)]
            result = a / b

        <span class="text-purple-400">return</span> [TextContent(type=<span class="text-green-400">"text"</span>, text=<span class="text-purple-400">f</span><span class="text-green-400">"Result: {result}"</span>)]

    <span class="text-purple-400">return</span> [TextContent(type=<span class="text-green-400">"text"</span>, text=<span class="text-purple-400">f</span><span class="text-green-400">"Unknown tool: {name}"</span>)]

<span class="text-gray-500"># Run the server</span>
<span class="text-purple-400">async def</span> <span class="text-blue-400">main</span>():
    <span class="text-purple-400">async with</span> stdio_server() <span class="text-purple-400">as</span> (read_stream, write_stream):
        <span class="text-purple-400">await</span> server.run(
            read_stream,
            write_stream,
            server.create_initialization_options()
        )

<span class="text-purple-400">if</span> __name__ == <span class="text-green-400">"__main__"</span>:
    <span class="text-purple-400">import</span> asyncio
    asyncio.run(main())</code></pre>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="w-6 h-6 bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
                        <h4 class="font-medium text-gray-900">Run Your Server</h4>
                    </div>
                    <div class="bg-gray-900 rounded-lg p-4">
                        <pre class="text-sm text-gray-300"><code>python server.py</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- MCP is Model Agnostic -->
        <div class="bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-6 mb-8">
            <div class="flex items-start gap-4">
                <div class="bg-emerald-100 text-emerald-600 p-2 rounded-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-emerald-900 mb-2">MCP is AI Model Agnostic</h3>
                    <p class="text-emerald-800 mb-3">
                        <strong>Important:</strong> The Model Context Protocol is an <em>open standard</em> - not tied to any specific AI provider.
                        Your MCP server works with any AI host that implements the protocol:
                    </p>
                    <div class="grid sm:grid-cols-2 gap-3 text-sm">
                        <div class="bg-white/60 rounded-lg p-3">
                            <p class="font-medium text-emerald-900 mb-1">Currently Supported:</p>
                            <ul class="text-emerald-700 space-y-1">
                                <li>- Claude Desktop & Claude Code</li>
                                <li>- Cursor IDE</li>
                                <li>- Zed Editor</li>
                                <li>- Continue (VS Code)</li>
                            </ul>
                        </div>
                        <div class="bg-white/60 rounded-lg p-3">
                            <p class="font-medium text-emerald-900 mb-1">Growing Ecosystem:</p>
                            <ul class="text-emerald-700 space-y-1">
                                <li>- OpenAI integration (coming)</li>
                                <li>- Custom AI applications</li>
                                <li>- Enterprise AI platforms</li>
                                <li>- Your own AI hosts</li>
                            </ul>
                        </div>
                    </div>
                    <p class="text-emerald-700 text-sm mt-3">
                        Build once, connect to any MCP-compatible AI system. That's the power of an open protocol.
                    </p>
                </div>
            </div>
        </div>

        <!-- Connect to an AI Host (Optional Example) -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">Example: Connect to Claude Desktop</h3>
                <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full">Optional - One of Many Hosts</span>
            </div>
            <p class="text-gray-600 mb-4">
                This shows how to connect to Claude Desktop as an example. Each MCP-compatible host has its own configuration method.
            </p>

            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <p class="text-sm font-medium text-gray-700 mb-2">macOS: <code class="bg-gray-100 px-1 rounded text-xs">~/Library/Application Support/Claude/claude_desktop_config.json</code></p>
                    <p class="text-sm font-medium text-gray-700 mb-2">Windows: <code class="bg-gray-100 px-1 rounded text-xs">%APPDATA%\Claude\claude_desktop_config.json</code></p>
                </div>
            </div>

            <div class="bg-gray-900 rounded-lg p-4 mt-4 overflow-x-auto">
                <pre class="text-sm text-gray-300"><code>{
  <span class="text-green-400">"mcpServers"</span>: {
    <span class="text-green-400">"my-mcp-server"</span>: {
      <span class="text-green-400">"command"</span>: <span class="text-green-400">"npx"</span>,
      <span class="text-green-400">"args"</span>: [<span class="text-green-400">"tsx"</span>, <span class="text-green-400">"/path/to/your/src/index.ts"</span>]
    }
  }
}</code></pre>
            </div>
            <p class="text-sm text-gray-500 mt-2">For Python, use: <code class="bg-gray-100 px-1 rounded">"command": "python", "args": ["/path/to/server.py"]</code></p>
        </div>

        <!-- What's Next -->
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="font-semibold text-gray-900 mb-4">What You've Built</h3>
                <ul class="space-y-2 text-sm text-gray-700">
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        A working MCP server with 2 tools
                    </li>
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        Input validation with schemas
                    </li>
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        Error handling patterns
                    </li>
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        Foundation for enterprise tools
                    </li>
                </ul>
            </div>

            <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-6 text-white">
                <h3 class="font-semibold mb-3">Go Deeper in Chapter 11</h3>
                <p class="text-indigo-100 text-sm mb-4">This lab covers the basics. The book teaches you:</p>
                <ul class="space-y-2 text-sm text-indigo-100 mb-4">
                    <li>- Resources & dynamic data exposure</li>
                    <li>- Prompt templates as MCP services</li>
                    <li>- Authentication & security patterns</li>
                    <li>- Enterprise deployment strategies</li>
                    <li>- Multi-server orchestration</li>
                </ul>
                <a href="https://subscribepage.io/from-blueprint-to-application" class="inline-block bg-white text-indigo-700 px-4 py-2 rounded-lg font-medium hover:bg-indigo-50 transition text-sm">
                    Get the Full Guide
                </a>
            </div>
        </div>

        <!-- Quote -->
        <div class="text-center py-8 border-t border-gray-200">
            <blockquote class="text-xl text-gray-600 italic max-w-2xl mx-auto">
                "Just as HTTP standardized web communication, MCP standardizes AI-to-system communication. Early adopters gain years of advantage."
            </blockquote>
            <p class="text-gray-500 mt-2">- From Blueprint to Application, Chapter 11</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-8 mt-8">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p>&copy; 2026 Fredrik Bratten. All Rights Reserved.</p>
            <p class="mt-2 text-sm">
                <a href="../" class="hover:text-white">Back to Demos</a>
                <span class="mx-2">|</span>
                <a href="../../" class="hover:text-white">Back to Showcase</a>
            </p>
        </div>
    </footer>

    <script>
        function showTab(tab) {
            // Update tab styling
            document.getElementById('tab-typescript').classList.remove('tab-active', 'text-gray-700');
            document.getElementById('tab-typescript').classList.add('text-gray-500');
            document.getElementById('tab-python').classList.remove('tab-active', 'text-gray-700');
            document.getElementById('tab-python').classList.add('text-gray-500');

            document.getElementById(`tab-${tab}`).classList.add('tab-active', 'text-gray-700');
            document.getElementById(`tab-${tab}`).classList.remove('text-gray-500');

            // Show/hide content
            document.getElementById('content-typescript').classList.add('hidden');
            document.getElementById('content-python').classList.add('hidden');
            document.getElementById(`content-${tab}`).classList.remove('hidden');
        }

        function copyCode(elementId) {
            const code = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('Code copied to clipboard!');
            });
        }
    </script>
</body>
</html>
