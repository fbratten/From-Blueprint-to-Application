<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Few-Shot Learning Builder - From Blueprint to Application</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        code, .font-mono { font-family: 'JetBrains Mono', monospace; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <nav class="text-sm text-gray-500">
                <a href="../../" class="hover:text-indigo-600">From Blueprint to Application</a>
                <span class="mx-2">/</span>
                <a href="../" class="hover:text-indigo-600">Demos</a>
                <span class="mx-2">/</span>
                <span class="text-gray-900">Few-Shot Builder</span>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <div class="text-center mb-8">
            <div class="inline-flex items-center gap-2 bg-indigo-100 text-indigo-700 px-4 py-2 rounded-full text-sm font-medium mb-4">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                Advanced Technique - Chapter 6
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Few-Shot Learning Builder</h1>
            <p class="text-gray-600 max-w-2xl mx-auto">Create consistent AI outputs by providing example patterns. Few-shot learning helps the AI understand exactly what format and style you want.</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <!-- Builder Form -->
            <div class="space-y-6">
                <!-- Task Description -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">1. Define Your Task</h2>
                    <label class="block text-sm font-medium text-gray-700 mb-2">What should the AI do?</label>
                    <textarea id="taskDescription" rows="2" placeholder="e.g., Classify customer feedback as positive, negative, or neutral" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>

                    <!-- Template Presets -->
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Or start with a template:</label>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="loadTemplate('sentiment')" class="text-xs px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full hover:bg-indigo-200 transition">Sentiment Analysis</button>
                            <button onclick="loadTemplate('extraction')" class="text-xs px-3 py-1 bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition">Data Extraction</button>
                            <button onclick="loadTemplate('classification')" class="text-xs px-3 py-1 bg-purple-100 text-purple-700 rounded-full hover:bg-purple-200 transition">Category Classification</button>
                            <button onclick="loadTemplate('rewriting')" class="text-xs px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full hover:bg-yellow-200 transition">Text Rewriting</button>
                        </div>
                    </div>
                </div>

                <!-- Examples Section -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-gray-900">2. Add Examples</h2>
                        <span id="exampleCount" class="text-sm text-gray-500">0 examples</span>
                    </div>

                    <div id="examplesContainer" class="space-y-4">
                        <!-- Examples will be added here -->
                    </div>

                    <button onclick="addExample()" class="mt-4 w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-500 hover:text-indigo-500 transition flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Add Example
                    </button>

                    <!-- Recommendation -->
                    <div id="exampleRecommendation" class="mt-4 p-3 bg-amber-50 rounded-lg text-sm text-amber-800 flex items-start gap-2">
                        <svg class="w-5 h-5 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span><strong>Tip:</strong> 3-5 examples work best for most tasks. Include edge cases and variety in your examples.</span>
                    </div>
                </div>

                <!-- New Input -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">3. Add Your Query</h2>
                    <label class="block text-sm font-medium text-gray-700 mb-2">What input should the AI process?</label>
                    <textarea id="newInput" rows="2" placeholder="e.g., The product exceeded my expectations! Great quality." class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                </div>

                <button onclick="generatePrompt()" class="w-full bg-indigo-600 text-white font-semibold py-4 rounded-xl hover:bg-indigo-700 transition shadow-lg">
                    Generate Few-Shot Prompt
                </button>
            </div>

            <!-- Output Panel -->
            <div class="space-y-6">
                <!-- Generated Prompt -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-gray-900">Generated Prompt</h2>
                        <button onclick="copyPrompt()" class="text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                            Copy
                        </button>
                    </div>
                    <div id="outputPrompt" class="bg-gray-900 rounded-lg p-4 font-mono text-sm text-gray-300 whitespace-pre-wrap min-h-[300px] overflow-auto">
                        <span class="text-gray-500">Your few-shot prompt will appear here...</span>
                    </div>
                </div>

                <!-- Quality Meter -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">Prompt Quality</h2>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-600">Example Count</span>
                                <span id="exampleScore" class="font-medium text-gray-900">0/5</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="exampleBar" class="bg-indigo-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-600">Task Clarity</span>
                                <span id="taskScore" class="font-medium text-gray-900">-</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="taskBar" class="bg-green-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-600">Example Variety</span>
                                <span id="varietyScore" class="font-medium text-gray-900">-</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="varietyBar" class="bg-purple-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Best Practices -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">Few-Shot Best Practices</h2>
                    <ul class="space-y-3 text-sm text-gray-700">
                        <li class="flex items-start gap-2">
                            <svg class="w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                            <span><strong>Use 3-5 examples</strong> - More isn't always better, quality matters</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <svg class="w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                            <span><strong>Include variety</strong> - Cover different cases and edge conditions</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <svg class="w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                            <span><strong>Be consistent</strong> - Use the same format across all examples</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <svg class="w-5 h-5 text-indigo-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                            <span><strong>Order matters</strong> - Put your best examples first and last</span>
                        </li>
                    </ul>
                </div>

                <!-- Learn More -->
                <div class="bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-xl p-6 text-white">
                    <h3 class="font-semibold mb-2">Chapter 6: Advanced Techniques</h3>
                    <p class="text-indigo-100 text-sm mb-4">Master few-shot learning, chain-of-thought prompting, and other advanced techniques for enterprise AI.</p>
                    <a href="https://subscribepage.io/from-blueprint-to-application" class="inline-block bg-white text-indigo-700 px-4 py-2 rounded-lg font-medium hover:bg-indigo-50 transition text-sm">
                        Get the Book
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-8 mt-16">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p>&copy; 2026 Fredrik Bratten. All Rights Reserved.</p>
            <p class="mt-2 text-sm">
                <a href="../" class="hover:text-white">Back to Demos</a>
                <span class="mx-2">|</span>
                <a href="../../" class="hover:text-white">Back to Showcase</a>
            </p>
        </div>
    </footer>

    <script>
        let examples = [];
        let exampleCounter = 0;

        const templates = {
            sentiment: {
                task: "Classify the sentiment of customer feedback as Positive, Negative, or Neutral.",
                examples: [
                    { input: "This product is amazing! Best purchase I've ever made.", output: "Positive" },
                    { input: "Terrible experience. The item arrived broken and customer service was unhelpful.", output: "Negative" },
                    { input: "The product works as described. Nothing special but does the job.", output: "Neutral" }
                ],
                query: "I've been using this for a month and it's okay, but the battery could be better."
            },
            extraction: {
                task: "Extract the product name, price, and availability from the text.",
                examples: [
                    { input: "The new iPhone 15 Pro is now available for $999 at all Apple stores.", output: "Product: iPhone 15 Pro\nPrice: $999\nAvailability: In stock" },
                    { input: "Samsung Galaxy S24 - Currently out of stock. Regular price $849.", output: "Product: Samsung Galaxy S24\nPrice: $849\nAvailability: Out of stock" }
                ],
                query: "Check out the Google Pixel 8 for just $699! Limited quantities available."
            },
            classification: {
                task: "Categorize support tickets into: Billing, Technical, Account, or General.",
                examples: [
                    { input: "I was charged twice for my subscription this month.", output: "Billing" },
                    { input: "The app keeps crashing when I try to upload photos.", output: "Technical" },
                    { input: "How do I reset my password?", output: "Account" }
                ],
                query: "I can't log in and the verification code isn't being sent to my email."
            },
            rewriting: {
                task: "Rewrite the casual message in a professional business tone.",
                examples: [
                    { input: "Hey, can we push the meeting to next week? Super busy rn.", output: "I would like to request rescheduling our meeting to next week due to current workload constraints." },
                    { input: "That idea is kinda meh, tbh.", output: "While I appreciate the suggestion, I believe we may want to explore alternative approaches." }
                ],
                query: "Can you get this done ASAP? Boss is on my case about it."
            }
        };

        function loadTemplate(templateName) {
            const template = templates[templateName];
            document.getElementById('taskDescription').value = template.task;
            document.getElementById('newInput').value = template.query;

            // Clear existing examples
            examples = [];
            document.getElementById('examplesContainer').innerHTML = '';

            // Add template examples
            template.examples.forEach(ex => {
                addExample(ex.input, ex.output);
            });

            updateQuality();
        }

        function addExample(inputText = '', outputText = '') {
            exampleCounter++;
            const exampleId = exampleCounter;

            const exampleHtml = `
                <div id="example-${exampleId}" class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                    <div class="flex justify-between items-center mb-3">
                        <span class="text-sm font-medium text-gray-700">Example ${examples.length + 1}</span>
                        <button onclick="removeExample(${exampleId})" class="text-gray-400 hover:text-red-500">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Input</label>
                            <textarea id="input-${exampleId}" rows="2" placeholder="Example input..." class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">${inputText}</textarea>
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">Expected Output</label>
                            <textarea id="output-${exampleId}" rows="2" placeholder="Expected output..." class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">${outputText}</textarea>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('examplesContainer').insertAdjacentHTML('beforeend', exampleHtml);
            examples.push(exampleId);
            updateExampleCount();
            updateQuality();
        }

        function removeExample(id) {
            document.getElementById(`example-${id}`).remove();
            examples = examples.filter(e => e !== id);
            updateExampleCount();
            updateQuality();
        }

        function updateExampleCount() {
            document.getElementById('exampleCount').textContent = `${examples.length} example${examples.length !== 1 ? 's' : ''}`;
        }

        function generatePrompt() {
            const task = document.getElementById('taskDescription').value.trim();
            const newInput = document.getElementById('newInput').value.trim();

            let prompt = '';

            if (task) {
                prompt += `Task: ${task}\n\n`;
            }

            if (examples.length > 0) {
                prompt += `Here are some examples:\n\n`;

                examples.forEach((id, index) => {
                    const input = document.getElementById(`input-${id}`).value.trim();
                    const output = document.getElementById(`output-${id}`).value.trim();

                    if (input && output) {
                        prompt += `Example ${index + 1}:\n`;
                        prompt += `Input: ${input}\n`;
                        prompt += `Output: ${output}\n\n`;
                    }
                });
            }

            if (newInput) {
                prompt += `Now process this:\nInput: ${newInput}\nOutput:`;
            }

            const outputEl = document.getElementById('outputPrompt');
            if (prompt.trim()) {
                outputEl.textContent = prompt;
            } else {
                outputEl.innerHTML = '<span class="text-gray-500">Add a task description and examples to generate your prompt...</span>';
            }

            updateQuality();
        }

        function updateQuality() {
            const task = document.getElementById('taskDescription').value.trim();

            // Example count score
            const examplePercent = Math.min(examples.length * 20, 100);
            document.getElementById('exampleBar').style.width = examplePercent + '%';
            document.getElementById('exampleScore').textContent = `${examples.length}/5`;

            // Task clarity score
            let taskPercent = 0;
            let taskLabel = 'Missing';
            if (task.length > 50) {
                taskPercent = 100;
                taskLabel = 'Clear';
            } else if (task.length > 20) {
                taskPercent = 60;
                taskLabel = 'Basic';
            } else if (task.length > 0) {
                taskPercent = 30;
                taskLabel = 'Brief';
            }
            document.getElementById('taskBar').style.width = taskPercent + '%';
            document.getElementById('taskScore').textContent = taskLabel;

            // Variety score (based on output diversity)
            let varietyPercent = 0;
            let varietyLabel = '-';
            if (examples.length >= 3) {
                const outputs = examples.map(id => document.getElementById(`output-${id}`).value.trim().toLowerCase());
                const uniqueOutputs = new Set(outputs).size;
                if (uniqueOutputs >= 3) {
                    varietyPercent = 100;
                    varietyLabel = 'Excellent';
                } else if (uniqueOutputs >= 2) {
                    varietyPercent = 60;
                    varietyLabel = 'Good';
                } else {
                    varietyPercent = 30;
                    varietyLabel = 'Low';
                }
            } else if (examples.length > 0) {
                varietyPercent = 20;
                varietyLabel = 'Need more';
            }
            document.getElementById('varietyBar').style.width = varietyPercent + '%';
            document.getElementById('varietyScore').textContent = varietyLabel;
        }

        function copyPrompt() {
            const output = document.getElementById('outputPrompt').textContent;
            if (output && !output.includes('Add a task')) {
                navigator.clipboard.writeText(output);
                alert('Prompt copied to clipboard!');
            }
        }

        // Auto-generate on input change
        document.addEventListener('input', function(e) {
            if (e.target.tagName === 'TEXTAREA') {
                generatePrompt();
            }
        });
    </script>
</body>
</html>
